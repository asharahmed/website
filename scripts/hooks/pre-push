#!/usr/bin/env bash
set -euo pipefail

if [ "${SKIP_HOOKS:-}" = "1" ]; then
  exit 0
fi

if [ "${SKIP_E2E:-}" = "1" ]; then
  exit 0
fi

if [ ! -f package.json ]; then
  exit 0
fi

if ! command -v npm >/dev/null 2>&1; then
  echo "pre-push: npm not found; skipping."
  exit 0
fi

npm run -s test:e2e
