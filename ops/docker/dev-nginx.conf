server {
    listen 80;
    server_name _;

    root /usr/share/nginx/html;
    index index.html;

    # Health check endpoint
    location = /healthz {
        access_log off;
        return 200 "ok\n";
    }

    # Mock stub_status for local development
    location = /status/nginx {
        access_log off;
        default_type text/plain;
        return 200 "Active connections: 5\nserver accepts handled requests\n 12345 12345 54321\nReading: 1 Writing: 2 Waiting: 2\n";
    }

    # Serve files
    location / {
        try_files $uri $uri/ =404;
    }

    # Ensure proper MIME types
    location ~* \.(js|css|json)$ {
        try_files $uri =404;
    }
}
